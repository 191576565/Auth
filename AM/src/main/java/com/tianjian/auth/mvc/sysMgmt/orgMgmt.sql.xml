<?xml version="1.0" encoding="UTF-8"?>
<sql-statement namespace="tianjian.org">

	<sql id="pageSelect">
		<![CDATA[ 
        	select t.UUID,t3.DOMAIN_NAME,t.ORG_UNIT_ID,t.ORG_UNIT_DESC,t4.ORG_UNIT_DESC AS UP_ORG_UNIT_DESC
        	 from sys_org_info t 
        		left join sys_domain_info t3 on t3.UUID = t.DOMAIN_UUID
            	left join SYS_ORG_INFO t4 on t4.UUID = t.ORG_UP_UUID
           		where 1=1
        			and t.domain_uuid=?
        			and t.org_up_uuid=(select t2.UUID from sys_org_info t2 where t2.ORG_UP_UUID='#')
        			order by t.modified_date desc
    	]]>
	</sql>
	
	<sql id="subSelect">
		<![CDATA[ 
        	select t.UUID,t4.DOMAIN_NAME,t.ORG_UNIT_ID,t.ORG_UNIT_DESC,t5.ORG_UNIT_DESC AS UP_ORG_UNIT_DESC from sys_org_info t 
          		left join SYS_DOMAIN_INFO t4 on t4.UUID = t.DOMAIN_UUID
          		left join SYS_ORG_INFO t5 on t5.UUID = t.ORG_UP_UUID
        		where 1=1 
        			and t.domain_uuid=?
        			and t.org_up_uuid=(select t2.UUID from sys_org_info t2 
                                    where t2.org_up_uuid=(select t3.uuid from sys_org_info t3 where t3.org_up_uuid='#') 
                                      and t2.DOMAIN_UUID=?)
        			order by t.modified_date desc
    	]]>
	</sql>
	
	<sql id="subSelect2">
		<![CDATA[ 
        	select t.UUID,t2.DOMAIN_NAME,t.ORG_UNIT_ID,t.ORG_UNIT_DESC,t3.ORG_UNIT_DESC AS UP_ORG_UNIT_DESC from sys_org_info t
          		left join SYS_DOMAIN_INFO t2 on t2.UUID = t.DOMAIN_UUID
          		left join SYS_ORG_INFO t3 on t3.UUID = t.ORG_UP_UUID
        		where 1=1 
        			and t.domain_uuid=?
        			and t.org_up_uuid=?
        			order by t.modified_date desc
    	]]>
	</sql>
	
	<sql id="getOrgInfo">
		<![CDATA[ 
        	select t.* from SYS_ORG_INFO t 
    			where t.DOMAIN_UUID= ? 
      				or t.ORG_UP_UUID='#'
    	]]>
	</sql>
	
	<sql id="getSubOrg">
		<![CDATA[ 
        	select * from sys_org_info  t  
				start with t.ORG_UP_UUID=?  
					connect by PRIOR T.UUID=T.ORG_UP_UUID
    	]]>
	</sql>
	
	<sql id="repeatSelect">
		<![CDATA[ 
        	select t.* from sys_org_info t
  				where t.DOMAIN_UUID=? 
  					and t.ORG_UNIT_ID=?
    	]]>
	</sql>
	
</sql-statement>