<?xml version="1.0" encoding="UTF-8"?>
<!-- 用户sql -->
<sql-statement namespace="tianjian.oplog">

	<sql id="pageAllSelect">
		<![CDATA[ 
        	select * 
    	]]>
	</sql>
	<sql id="pageAllFrom">
		<![CDATA[ 
		<% if(domain_name == "ROOT"){ %>
        	 from sys_log 
        <% } else { %>
        	 from sys_log where domain_name=#'$domain_name$'#
        <% } %>
    	]]>
	</sql>
	<sql id="pageSearchSelect">
		<![CDATA[ 
        	select * 
    	]]>
	</sql>
	<sql id="pageSearchFrom">
	<![CDATA[ 
		from sys_log 
		where 1=1
		<% if(domain_name != "ROOT"){ %>
		 and domain_name=#'$domain_name$'#
		<% } %>
		<% if(!isEmpty(user_uuid)){ %>
		 and user_name like #'%$user_uuid$%'#
		<% } %>
		
		<% if(!isEmpty(op_type)){ %>
		 and op_type like #'%$op_type$%'#
		<% } %>	
		
		<% if(!isEmpty(startdate_start)){ %>
			and op_date >= to_timestamp(#'$startdate_start$'#, 'YYYY-MM-DD HH24:MI:ss') 
		<% } %>
			
		<% if(!isEmpty(startdate_end)){ %>
			and op_date <= to_timestamp(#'$startdate_end$'#, 'YYYY-MM-DD HH24:MI:ss')
		<% } %>
	]]>
	</sql>
</sql-statement>