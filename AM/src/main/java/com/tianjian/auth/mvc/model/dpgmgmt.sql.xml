<?xml version="1.0" encoding="UTF-8"?>
<!-- 用户sql -->
<sql-statement namespace="tianjian.dpgmgmt">

	<sql id="pageAllSelect">
		<![CDATA[ 
         select t.uuid,t1.domain_id, t1.domain_name, t.group_id, t.group_desc, t.users
    	]]>
	</sql>
	
	<sql id="pageAllFrom">
		<![CDATA[ 
		  from sys_group_info t, sys_domain_info t1
         where t.domain_uuid = t1.uuid and 1=1
		<% if(domain_id == "root"){ %>
       	 
        <% } else if(!isEmpty(domain_id)){%>
        and t1.domain_id=#'$domain_id$'#
        <% } %>
        
    	]]>
	</sql>
	
	<sql id="domaininfo">
		<![CDATA[ 
		select * from SYS_DOMAIN_INFO t 
         where 1=1
		<% if(domain_id == "root"){ %>
       	 
        <% } else if(!isEmpty(domain_id)){%>
        and t.domain_id=#'$domain_id$'#
        <% } %>
        
    	]]>
	</sql>
	
	<!-- 保存权限组信息 -->
	<sql id="ingroupinfo">
		<![CDATA[ 
		insert into sys_group_info
        (uuid,
         domain_uuid,
         group_id,
         group_desc,
         created_date,
         creator,
         modified_date,
         modifier,
         memo,
         users)
     select 
          sys_guid(),
          max(t.uuid),
          #'$groupid$'#,
          #'$groupname$'#,
          sysdate,
          #'$opuser$'#,
          sysdate,
          #'$opuser$'#,
           '',
          #'$guserid$'#
        from SYS_DOMAIN_INFO t WHERE t.domain_id =#'$domainid$'#
    	]]>
	</sql>
	
	<!-- 删除权限组信息 -->
	<sql id="deletegid">
		<![CDATA[ 
		delete from sys_group_info t where  t.uuid in (#'$para$'#)
    	]]>
	</sql>
	
	<!-- 验证权限组id -->
	<sql id="verifygid">
		<![CDATA[ 
		select t.domain_uuid
        from sys_group_info t, sys_domain_info t1
        where t.domain_uuid = t1.uuid
        and t.group_id = #'$groupid$'#
        and t1.domain_id = #'$domainid$'#
    	]]>
	</sql>
	
</sql-statement>